<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ElectronicAI.ca - Bridging Electronics and Artificial Intelligence</title>
    <meta name="description"
        content="Explore the convergence of electronics and artificial intelligence at ElectronicAI.ca. Discover articles, projects, and insights into AI hardware, embedded AI, IoT, machine learning, and robotics.">
    <meta name="keywords"
        content="electronics, artificial intelligence, AI, embedded AI, IoT, machine learning, deep learning, robotics, AI hardware, microcontrollers, sensors, actuators, neural networks, computer vision, natural language processing, smart devices, automation, electronic circuits, AI applications, Canada AI, electronicai.ca">
    <meta name="author" content="ElectronicAI.ca Team">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://www.electronicai.ca/">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="bg-light">
    <div class="container min-vh-100 d-flex flex-column">
        <header class="py-4 mb-4 bg-primary text-white rounded-bottom shadow-sm text-center">
            <h1 class="mb-1">ElectronicAI.ca</h1>
            <p class="mb-3">Bridging the Gap Between Electronics and Artificial Intelligence</p>
            <div class="d-flex justify-content-center gap-2">
                <a href="/history" class="btn btn-secondary">View History</a>
                <a href="/logout" class="btn btn-danger">Logout</a>
            </div>
        </header>

        <main class="flex-grow-1 d-flex justify-content-center align-items-start">
            <section class="card shadow w-100" style="max-width: 700px;">
                <div class="card-body d-flex flex-column" style="min-height: 500px;">
                    <div class="flex-grow-1 overflow-auto mb-3" id="chat-history" style="max-height: 350px;">
                        <div class="alert alert-info mb-2 ai-message">
                            Hello! I'm your ElectronicAI assistant. Ask me anything about the exciting world where
                            electronics
                            meets artificial intelligence.
                        </div>
                    </div>
                    <div class="align-items-center mb-3" id="typing-indicator" style="display: none;">
                        <span class="spinner-border spinner-border-sm text-primary me-2" role="status"></span>
                        <span>AI is typing...</span>
                    </div>
                    <div class="input-group">
                        <input type="text" id="user-input" class="form-control" placeholder="Type your question here..."
                            autocomplete="off">
                        <button id="send-button" class="btn btn-primary">Send</button>
                    </div>
                </div>
            </section>
        </main>

        <footer class="mt-auto py-3 text-center bg-dark text-white rounded-top">
            <p class="mb-0">&copy; 2025 ElectronicAI.ca. All rights reserved.</p>
        </footer>
    </div>

    <script>
        const chatHistory = document.getElementById('chat-history');
        const userInput = document.getElementById('user-input');
        const sendButton = document.getElementById('send-button');
        const typingIndicator = document.getElementById('typing-indicator');

        function showTypingIndicator(show) {
            typingIndicator.style.display = show ? 'flex' : 'none';
            if (show) {
                chatHistory.scrollTop = chatHistory.scrollHeight;
            }
        }

        function addMessage(message, sender) {
            const messageDiv = document.createElement('div');
            if (sender === 'user') {
                messageDiv.className = 'alert alert-primary align-self-end user-message mb-2';
            } else {
                messageDiv.className = 'alert alert-info align-self-start ai-message mb-2';
            }
            messageDiv.textContent = message;
            chatHistory.appendChild(messageDiv);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        }

        document.addEventListener('DOMContentLoaded', function () {
            showTypingIndicator(false);
            chatHistory.scrollTop = chatHistory.scrollHeight;
        });

        async function sendMessage() {
            const message = userInput.value.trim();
            if (message === '') {
                return;
            }
            addMessage(message, 'user');
            userInput.value = '';
            showTypingIndicator(true);

            try {
                const response = await fetch('/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ message: message })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                showTypingIndicator(false);
                addMessage(data.response, 'ai');
            } catch (error) {
                console.error('Error sending message:', error);
                showTypingIndicator(false);
                addMessage("Oops! Something went wrong. Please try again.", 'ai');
            }
        }

        sendButton.addEventListener('click', sendMessage);

        userInput.addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>

</html>